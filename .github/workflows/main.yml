- name: Start Cloudflare Tunnel
  env:
    TUNNEL_TOKEN: ${{ secrets.CLOUDFLARE_TUNNEL_TOKEN }}
  run: |
    echo "Starting Cloudflare Tunnel..."
    cloudflared tunnel --no-autoupdate run --token "$TUNNEL_TOKEN" > tunnel.log 2>&1 &
    sleep 10
    if ! grep -q "Connected" tunnel.log; then
      echo "❌ Tunnel failed to start. Check tunnel.log for details."
      cat tunnel.log
      exit 1
    fi
    echo "✅ Tunnel started successfully."
