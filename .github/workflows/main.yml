name: Start Pixelmon Server

on:
  workflow_dispatch:

jobs:
  get-claim-code:
    runs-on: ubuntu-latest
    steps:
      - name: 1. Install and Run playit.gg to get Claim Code
        run: |
          echo "Installing playit.gg..."
          curl -SsL https://playit-cloud.github.io/ppa/key.gpg | gpg --dearmor | sudo tee /etc/apt/trusted.gpg.d/playit.gpg >/dev/null
          echo "deb [signed-by=/etc/apt/trusted.gpg.d/playit.gpg] https://playit-cloud.github.io/ppa/data ./" | sudo tee /etc/apt/sources.list.d/playit-cloud.list
          sudo apt update
          sudo apt install -y playit
          
          echo "Running playit.gg. Look for the claim code in the log below."
          echo "The workflow will hang here. This is normal. Copy the code and then cancel the run."
          playit
